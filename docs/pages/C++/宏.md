---
title: 宏
date: 2020-09-30
sidebarDepth: 2
tags:
 - 宏
categories:
 - C++
---
# 宏
## 宏对象(object-like macro)
- 使用场景：
  - 宏对象常用于定义常量和类型别名
  - 宏函数也能定义不带参数的函数，结构(但这意义不大)
```c++
#define PI 3.14
#define FLOAT_64 double
#define CLASS_B class B{};
CLASS_B
#undef CLASS_B
int main(){
    B b;
    FLOAT_64 f64=PI;
}
```
## 宏函数(Function-like macro)
- 使用场景：
  - 宏函数常用于定义表达式
  - 宏函数也可定义带参数函数，甚至用来定义模板结构体
```c++
//宏函数定义表达式
#define EQUAL(a,b) ((a)==(b))
//宏函数定义模板类
#define CLASS_A(X) template<class T=X> \
class A{\
using VALUE_TYPE=T;\
public:\
VALUE_TYPE value;\
};
CLASS_A(int)
#undef CLASS_A

int main(){
    A<> as1{2};
    A<double> as2{ 1.1 };
    EQUAL(1,2);
}
```
## 预设宏
- [Predefined-Macros](https://gcc.gnu.org/onlinedocs/cpp/Predefined-Macros.html#Predefined-Macros)